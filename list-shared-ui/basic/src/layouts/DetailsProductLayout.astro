---
import Container from "../components/Container.astro";
import Layout from "./Layout.astro";
import FormattedDate from "../components/FormattedDate.astro";
import MarkdownText from "../components/react-components/markdown-text";
import localeTextSite from "../locale/locale_text_site.json";

const { title, description, category, author, pubDate, tags, price, discount } = Astro.props;

---

<Layout title={title} description="">
  <Container>
    <div class=" mx-auto max-w-[735px] mt-14 ">
      <span class="text-blue-400 uppercase tracking-wider text-sm font-medium">
        {category}
      </span>
      <h1
        class="text-4xl lg:text-5xl font-bold lg:tracking-tight mt-1 lg:leading-tight flex flex-col gap-2">
       
        <MarkdownText text={title} client:load /> 
        <div class="flex items-center gap-4">
          {discount > 0 ? (
            <>
              <span class="text-2xl font-semibold  line-through">
                {price} {localeTextSite.globalSettings.iconCurrency}
              </span>
              <span class="text-2xl font-semibold ">
                {Math.round(price * (1 - discount / 100))} {localeTextSite.globalSettings.iconCurrency}
              </span>
            </>
          ) : (
            <span class="text-2xl font-semibold ">
              {price} {localeTextSite.globalSettings.iconCurrency}
            </span>
          )}
        </div>
      </h1>

     

      <div class="flex gap-2 mt-3 items-center flex-wrap md:flex-nowrap">
       
       
        <span class="text-gray-200">
          {author}
        </span>
        <span class="text-gray-200">•</span>
        <p class="date">
          <FormattedDate date={pubDate} />
        </p>
        <span class="text-gray-200 hidden md:block">•</span>
        <div class="w-full md:w-auto flex flex-wrap gap-3">
          {
            tags.map((tag: string) => (
              <span class="text-sm text-gray-300">#{tag}</span>
            ))
          }
        </div>
      </div>

       
      <div
        class=" mx-auto   mt-6">
       
        <MarkdownText text={description} client:load /> 

      </div>
    </div>

    <div 
   
    class="mx-auto    mt-6">
      <slot />
    </div>
    <div class="text-center  mt-8">
      <a
        href="/products"
        class=" bg-blue-300 px-5 py-3 rounded-md hover:bg-blue-700 transition"
        >← {localeTextSite.globalSettings.btnBack}</a
      >
    </div>
  </Container>
</Layout>
